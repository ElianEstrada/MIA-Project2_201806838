<app-navbar [admin]="true"></app-navbar>
<div class="container content">
  <div>
    <!-- Modal Structure -->
    <div id="modal1" class="modal blue-grey darken-3 modal__content">
      <div class="modal-content">
        <div>
            <div class="row form__content">
                <form class="col s12">
                    <div class="row form__content__input">
                        <h1><b> {{type}} </b></h1>
                      <div class="row">
                        <div class="input-field col s6">
                          <i class="material-icons prefix black-text">account_circle</i>
                          <input
                            placeholder="Name"
                            name="name"
                            [(ngModel)]="name"
                            type="text"
                            class="validate"
                          />
                        </div>
                        <div class="input-field col s6" [hidden] = "child">
                          <i class="material-icons prefix black-text">email</i>
                          <input
                            placeholder="Email"
                            name="email"
                            [(ngModel)]="email"
                            type="email"
                            class="validate"
                          />
                        </div>
                        <div class="input-field col s6" [hidden] = "!child">
                            <i class="material-icons prefix black-text">mood</i>
                            <input
                              placeholder="NickName"
                              name="nickName"
                              [(ngModel)]="nickName"
                              type="text"
                              class="validate"
                            />
                          </div>
                      </div>
                      <div class="row">
                        <div class="input-field col l6 s12">
                          <i class="material-icons prefix black-text">vpn_key</i>
                          <input
                            placeholder="Password"
                            name="password"
                            [(ngModel)]="password"
                            type="password"
                            class="validate"
                          />
                        </div>
                        <div class="input-field col l6 s12" [hidden] ="child">
                          <i class="material-icons prefix black-text">local_phone</i>
                          <input
                            placeholder="Telephone Number"
                            name="phone"
                            [(ngModel)]="telephone"
                            type="number"
                            class="validate"
                          />
                        </div>
                        <div class="input-field col l6 s12" [hidden] = "!child">
                            <i class="material-icons prefix black-text">today</i>
                            <input
                              placeholder="BirthDate"
                              name="birthday"
                              [(ngModel)]="birthday"
                              type="date"
                              class="validate"
                            />
                          </div>
                      </div>
                      <div class="row">
                        <div class="input-field col s12" [hidden] = "!child">
                            <i class="material-icons prefix black-text">monetization_on</i>
                            <input
                              placeholder="Budget"
                              name="budget"
                              [(ngModel)]="budget"
                              type="number"
                              step = "0.01"
                              class="validate"
                            />
                          </div>
                      </div>
                      <div class="row">
                        <div class="input-field col l6 s12" [hidden]="child">
                          <select
                            class="browser-default"
                            [(ngModel)]="department"
                            name="department"
                            (change)="getMunicipality()"
                          >
                            <option [value]="0" disabled selected>Choose Department</option>
                            <option [value]="item.value" *ngFor="let item of departments">
                              {{ item.name }}
                            </option>
                          </select>
                        </div>
                        <div class="input-field col l6 s12" [hidden]="!child">
                            <select
                              class="browser-default"
                              [(ngModel)]="gender"
                              name="gender"
                            >
                              <option [value]="0" disabled selected>Choose Gender</option>
                              <option [value]="item.code" *ngFor="let item of genders">
                                {{ item.name }}
                              </option>
                            </select>
                          </div>
                        <div class="input-field col l6 s12" [hidden]="child">
                          <select
                            class="browser-default"
                            [(ngModel)]="municipality"
                            name="municipality"
                          >
                            <option [value]="0" disabled selected>Choose Municipality</option>
                            <option [value]="item.value" *ngFor="let item of municipalitys">
                              {{ item.name }}
                            </option>
                          </select>
                        </div>
                        <div class="input-field col l6 s12" [hidden]="!child">
                            <select
                              class="browser-default"
                              [(ngModel)]="parent"
                              name="parent"
                            >
                              <option [value]="0" disabled selected>Choose Parent</option>
                              <option [disabled]="type === 'Modify'" [value]="item.code" *ngFor="let item of parents">
                                {{ item.name }}
                              </option>
                            </select>
                          </div>
                        <div class="row">
                          <div class="input-field col s12" [hidden]="child">
                            <i class="material-icons prefix black-text">description</i>
                            <input placeholder="Description" 
                            [(ngModel)]="description"
                            name="description"
                            type="text" 
                            class="validate" />
                          </div>
                        </div>
                        <div class="row">
                          <div class="input-field col s6" [hidden]="child">
                            <i class="material-icons prefix black-text">location_searching</i>
                            <input
                              placeholder="Longitude"
                              type="number"
                              step="0.00000001"
                              name="longitude"
                            [(ngModel)]="longitude"
                              class="validate"
                            />
                          </div>
                          <div class="input-field col s6" [hidden]="child">
                            <i class="material-icons prefix black-text">location_searching</i>
                            <input
                              placeholder="Latitude"
                              type="number"
                              step="0.00000001"
                              name="latitude"
                            [(ngModel)]="latitude"
                              class="validate"
                            />
                          </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12" [hidden]="userType === 2 || (userType === 0 && child)">
                                <select
                                  class="browser-default"
                                  [(ngModel)]="userType"
                                  name="userType"
                                >
                                  <option [value]="0" disabled selected>Choose UserType</option>
                                  <option [value]="item.code" *ngFor="let item of usersType">
                                    {{ item.name }}
                                  </option>
                                </select>
                              </div>
                              <div>
                                <button
                                  class="btn-large waves-effect waves-light green modal-close"
                                  (click)="execute()"
                                >
                                  {{type}}
                                </button>
                              </div>
                        </div>
                      </div>
                    </div>
                  </form>
              <div [hidden] ="true">
                  <div class="red">
                    <h4>
                      Error in to Registry
                    </h4>
                  </div>
                </div>
            </div>
          </div>
      </div>
    </div>
  </div>
  <div class="row">
    <h1>Profiles</h1>
  </div>
  <div class="card z-depth-3 grey darken-4">
    <table class="striped responsive-table centered">
      <thead>
        <tr>
          <th>No.</th>
          <th>Name</th>
          <th>Email/NickName</th>
          <th>Password</th>
          <th>Telephone</th>
          <th>Department</th>
          <th>Municipality</th>
          <th>UserType</th>
          <th>Budget</th>
          <th>Parent</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of users; index as i">
          <td>{{ i + 1 }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.email }}</td>
          <td>{{ item.password }}</td>
          <td>{{ item.telephone }}</td>
          <td>{{ item.department }}</td>
          <td> {{item.municipality}} </td>
          <td> {{item.nameUserType}} </td>
          <td> {{item.budget}} </td>
          <td> {{item.nameParent}} </td>
          <td>
            <a href="#modal1" (click) = "modify(item)" class="modal-trigger" title="modify"
              ><i class="material-icons blue-text text-darken-4"> edit </i></a
            >
            <a title="delete" (click)="delete(item)"
              ><i class="material-icons red-text"> delete </i></a
            >
          </td>
        </tr>
      </tbody>
    </table>
    <div class="fixed-action-btn">
        <a class="btn-floating btn-large blue darken-4 modal-trigger" title="Add">
          <i class="large material-icons">add</i>
        </a>
        <ul>
            <li><a href="#modal1"  class="btn-floating red modal-trigger" title="Child"  (click)="registry(true)" ><i class="material-icons">emoji_people</i></a></li>
            <li><a href="#modal1"  class="btn-floating yellow darken-1 modal-trigger" title="User"  (click)="registry(false)" ><i class="material-icons">person</i></a></li>
          </ul>
      </div>
  </div>
</div>
